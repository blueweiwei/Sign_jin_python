# 今日校园 实现浏览器端、签到web端

> 手机端的今日校园，如果手机出现小疏忽，可能导致错过通知。这里简单挖掘一下，电脑使用浏览器进行签到。

##### 首先，手机端抓包分析。发现一个网站，很奇特，有学校的标志。

如下：

<img src="https://i.loli.net/2020/08/23/ZkjXqMbJT8tUNYh.jpg" alt="23831856978E7A6D3C7392C73DA5FF9E" style="zoom:50%;" />



浏览器复制链接查看，很兴奋，得到每天签到的页面



![image-20200823223453064](https://i.loli.net/2020/08/23/xfLrYJIHNmkwcp1.png)



这里，首次登陆，需要跳转到学校的认证页面。

下面分析一下相关参数：

```html
https://hactcm.cpdaily.com/wec-counselor-collector-apps/stu/mobile/index.html?collectorWid=43140&from=push&timestamp=1598192212361#/notice
```

| 参数         | 值            | 含义                                 |
| ------------ | ------------- | ------------------------------------ |
| collectorWid | 43140         | 表单的id值，目测是随机区间值，待验证 |
| from         | push          | 一参数                               |
| timestamp    | 1598192212361 | 时间戳 UNIX                          |

替换两个参数，可以直接在浏览器端进行签到。定位可以开启浏览器权限。

简单谈谈  

参数  collectorWid :  根据查看，可以辨别出，43136-43140是本班的区间，其他区间为本校其他班级的签到记录。有趣的是，这几次是相连的，对应这近两天的数据。具体规律需要几天后获取。

参数  timestamp   :UNIX 的时间戳，这个了解过，对应你访问的时间。如果要想签到，需要获取到当前的时间戳修改，要不然会有错误(未知)


--------------------

时间：2020-08-24

| 时间    | id    |
| ------- | ----- |
| 8.18 10 | 42606 |
| 8.18 12 | 42607 |
| 8.19 10 | 42608 |
| 8.19 12 | 42609 |
|         |       |
| 8.20 10 | 42951 |
| 8.20 12 | 42952 |
| 8.21 10 | 42953 |
|         |       |
| 8.21 12 | 43136 |
| 8.22 10 | 43137 |
| 8.22 12 | 43138 |
| 8.23 10 | 43139 |
| 8.23 12 | 43140 |
|         |       |
| 8.24 10 | 43562 |
| 8.24 12 | 43563 |
| 8.25 10 | 43564 |
| 8.25 12 | 43565 |
| 8.26 10 | 43567 |
| 8.26 12 | 43568 |
|         |       |

----------------------------

2020-08-29

目前，直接运行 py 文件，可以获取最新的文章 collectorWid 值。这里，如果你填写了改问卷，则返回一个空数组。

目前，接口依赖于 子墨大佬 的模拟登陆官网的项目，需要获取登陆后的session和cookies。这里不加赘述。

很高兴，这个探索可能就此结束了。去研究这个小项目，是为了更好的学习。至此，准备去学习更多、更优秀的知识。

子墨大佬接口项目：https://github.com/ZimoLoveShuang/wisedu-unified-login-api
